# MicroJobs Architecture & Data Flow

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CLIENT SIDE (React)                        â”‚
â”‚                   Port 5173 (Vite Dev Server)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  React Components                                      â”‚    â”‚
â”‚  â”‚  â”œâ”€ Home.tsx                                           â”‚    â”‚
â”‚  â”‚  â”œâ”€ Dashboard.tsx                                      â”‚    â”‚
â”‚  â”‚  â”œâ”€ signIn.tsx                                         â”‚    â”‚
â”‚  â”‚  â”œâ”€ signUp.tsx                                         â”‚    â”‚
â”‚  â”‚  â””â”€ navbar.tsx, Sidebar.tsx                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚           â”‚                                                      â”‚
â”‚           â”œâ”€ imports from â”€â”€â†’                                    â”‚
â”‚           â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  src/services/api.ts (API Client)                       â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  â€¢ Centralized API configuration                       â”‚   â”‚
â”‚  â”‚  â€¢ Base URL: http://localhost:5000/api                â”‚   â”‚
â”‚  â”‚  â€¢ Auto token injection from localStorage              â”‚   â”‚
â”‚  â”‚  â€¢ Error handling & type safety (TypeScript)           â”‚   â”‚
â”‚  â”‚  â€¢ Request/Response management                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚           â”‚                                                      â”‚
â”‚           â””â”€ HTTP Requests with â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚             Authorization: Bearer <token>
â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                    HTTP/HTTPS
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SERVER SIDE (Node.js)                        â”‚
â”‚                  Port 5000 (Express.js Server)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Express App (index.js)                                â”‚    â”‚
â”‚  â”‚  â”œâ”€ CORS Configuration                                 â”‚    â”‚
â”‚  â”‚  â”œâ”€ Cookie Parser                                      â”‚    â”‚
â”‚  â”‚  â”œâ”€ JSON Body Parser                                   â”‚    â”‚
â”‚  â”‚  â””â”€ Morgan Logger (dev middleware)                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚           â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Routes Registration                                  â”‚     â”‚
â”‚  â”‚                                                       â”‚     â”‚
â”‚  â”‚  /api/users    â”€â”€â†’  UserRoute.js                      â”‚     â”‚
â”‚  â”‚  /api/categories  â”€â”€â†’  CategoryRoute.js               â”‚     â”‚
â”‚  â”‚  /api/jobs    â”€â”€â†’  JobRoute.js                        â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚           â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Middleware & Controllers                             â”‚     â”‚
â”‚  â”‚                                                       â”‚     â”‚
â”‚  â”‚  ğŸ” auth.js Middleware                                â”‚     â”‚
â”‚  â”‚     â€¢ Validates JWT tokens                            â”‚     â”‚
â”‚  â”‚     â€¢ Supports Bearer tokens (headers)                â”‚     â”‚
â”‚  â”‚     â€¢ Supports Cookie tokens                          â”‚     â”‚
â”‚  â”‚                                                       â”‚     â”‚
â”‚  â”‚  ğŸ“¦ Controllers                                        â”‚     â”‚
â”‚  â”‚     â”œâ”€ UserController.js                              â”‚     â”‚
â”‚  â”‚     â”‚  â”œâ”€ register()                                  â”‚     â”‚
â”‚  â”‚     â”‚  â”œâ”€ login()                                     â”‚     â”‚
â”‚  â”‚     â”‚  â”œâ”€ logout()                                    â”‚     â”‚
â”‚  â”‚     â”‚  â””â”€ getUserList()                               â”‚     â”‚
â”‚  â”‚     â”‚                                                 â”‚     â”‚
â”‚  â”‚     â”œâ”€ CategoryController.js                          â”‚     â”‚
â”‚  â”‚     â”‚  â”œâ”€ getCategoryList()                           â”‚     â”‚
â”‚  â”‚     â”‚  â”œâ”€ createCategory()                            â”‚     â”‚
â”‚  â”‚     â”‚  â”œâ”€ editCategory()                              â”‚     â”‚
â”‚  â”‚     â”‚  â””â”€ deleteCategory()                            â”‚     â”‚
â”‚  â”‚     â”‚                                                 â”‚     â”‚
â”‚  â”‚     â””â”€ JobController.js                               â”‚     â”‚
â”‚  â”‚        â”œâ”€ getJobList()                                â”‚     â”‚
â”‚  â”‚        â”œâ”€ getAvailableJobs()                          â”‚     â”‚
â”‚  â”‚        â”œâ”€ createJob()                                 â”‚     â”‚
â”‚  â”‚        â”œâ”€ applyForJob()                               â”‚     â”‚
â”‚  â”‚        â”œâ”€ getApplicantsList()                         â”‚     â”‚
â”‚  â”‚        â”œâ”€ selectApplicant()                           â”‚     â”‚
â”‚  â”‚        â””â”€ changeJobStatus()                           â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚           â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Mongoose Models                                      â”‚     â”‚
â”‚  â”‚                                                       â”‚     â”‚
â”‚  â”‚  ğŸ“‹ User Schema                                       â”‚     â”‚
â”‚  â”‚     â€¢ phoneNumber (unique)                            â”‚     â”‚
â”‚  â”‚     â€¢ email                                           â”‚     â”‚
â”‚  â”‚     â€¢ firstName, lastName                             â”‚     â”‚
â”‚  â”‚     â€¢ passwordHashed (bcrypt)                         â”‚     â”‚
â”‚  â”‚     â€¢ role: user|manager|admin|superadmin            â”‚     â”‚
â”‚  â”‚     â€¢ status: active|disabled                         â”‚     â”‚
â”‚  â”‚                                                       â”‚     â”‚
â”‚  â”‚  ğŸ“‹ Category Schema                                   â”‚     â”‚
â”‚  â”‚     â€¢ name                                            â”‚     â”‚
â”‚  â”‚     â€¢ description                                     â”‚     â”‚
â”‚  â”‚                                                       â”‚     â”‚
â”‚  â”‚  ğŸ“‹ Job Schema                                        â”‚     â”‚
â”‚  â”‚     â€¢ title, description                              â”‚     â”‚
â”‚  â”‚     â€¢ category (ref)                                  â”‚     â”‚
â”‚  â”‚     â€¢ price, image                                    â”‚     â”‚
â”‚  â”‚     â€¢ status: Available|In Progress|Completed        â”‚     â”‚
â”‚  â”‚     â€¢ createdBy (ref to User)                         â”‚     â”‚
â”‚  â”‚     â€¢ applicants (array)                              â”‚     â”‚
â”‚  â”‚     â€¢ selectedApplicant                               â”‚     â”‚
â”‚  â”‚                                                       â”‚     â”‚
â”‚  â”‚  ğŸ“‹ Other Schemas                                     â”‚     â”‚
â”‚  â”‚     â€¢ Payment, UserProfile, UserHistory              â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚           â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼ Mongoose Connection
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATABASE (MongoDB)                           â”‚
â”‚                   mongodb://localhost:27017                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ“¦ MicroJob Database                                           â”‚
â”‚  â”œâ”€ users collection                                            â”‚
â”‚  â”‚  â”œâ”€ { _id, phoneNumber, email, firstName, lastName, ... }  â”‚
â”‚  â”‚  â”œâ”€ { _id, phoneNumber, email, firstName, lastName, ... }  â”‚
â”‚  â”‚  â””â”€ ...                                                      â”‚
â”‚  â”‚                                                               â”‚
â”‚  â”œâ”€ categories collection                                       â”‚
â”‚  â”‚  â”œâ”€ { _id, name, description }                              â”‚
â”‚  â”‚  â”œâ”€ { _id, name, description }                              â”‚
â”‚  â”‚  â””â”€ ...                                                      â”‚
â”‚  â”‚                                                               â”‚
â”‚  â”œâ”€ jobs collection                                             â”‚
â”‚  â”‚  â”œâ”€ { _id, title, category, price, applicants, ... }       â”‚
â”‚  â”‚  â”œâ”€ { _id, title, category, price, applicants, ... }       â”‚
â”‚  â”‚  â””â”€ ...                                                      â”‚
â”‚  â”‚                                                               â”‚
â”‚  â”œâ”€ payments collection                                         â”‚
â”‚  â”œâ”€ profiles collection                                         â”‚
â”‚  â””â”€ histories collection                                        â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LOGIN FLOW                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USER ENTERS CREDENTIALS
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client: loginUser()                 â”‚
â”‚ â€¢ Sends POST /api/users/login       â”‚
â”‚ â€¢ Body: {phone, password}           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼ HTTP POST
        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Server: UserController.login()                          â”‚
â”‚ â€¢ Validates phone & password                            â”‚
â”‚ â€¢ Finds user in MongoDB                                 â”‚
â”‚ â€¢ Compares password with bcrypt                         â”‚
â”‚ â€¢ Creates JWT token                                     â”‚
â”‚ â€¢ Sets cookie (httpOnly)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼ Response
        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Response Body:                                          â”‚
â”‚ {                                                       â”‚
â”‚   token: "eyJhbGc...",                                  â”‚
â”‚   user: {id, firstName, role, ...},                     â”‚
â”‚   message: "Login successful"                           â”‚
â”‚ }                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client: Save Token                  â”‚
â”‚ â€¢ localStorage.setItem('token', ...) â”‚
â”‚ â€¢ Redirect to dashboard             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Protected API Request Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ACCESSING PROTECTED ROUTE                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CLIENT REQUEST
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ api.ts - request() function          â”‚
â”‚ â€¢ Get token from localStorage        â”‚
â”‚ â€¢ Add Authorization header           â”‚
â”‚ â€¢ Headers: {                          â”‚
â”‚   'Authorization': 'Bearer <token>' â”‚
â”‚ }                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼ HTTP GET/POST/PUT/DELETE
        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Server Receives Request                                  â”‚
â”‚ â€¢ Request arrives with Authorization header              â”‚
â”‚ â€¢ Router matches route                                   â”‚
â”‚ â€¢ Route has verifyToken middleware                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ middleware/auth.js - verifyToken()                       â”‚
â”‚ â€¢ Extracts token from header or cookies                  â”‚
â”‚ â€¢ Validates JWT signature                                â”‚
â”‚ â€¢ Decodes token: {id, role, iat, exp}                   â”‚
â”‚ â€¢ Checks expiration                                      â”‚
â”‚ â€¢ Attaches decoded token to req.user                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€ âœ“ Token Valid
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Controller Handler                                       â”‚
â”‚ â€¢ Can access req.user._id                                â”‚
â”‚ â€¢ Queries database for authenticated user                â”‚
â”‚ â€¢ Executes protected operation                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Send Response                                            â”‚
â”‚ â€¢ 200 with data                                          â”‚
â”‚ â€¢ 401 if unauthorized                                    â”‚
â”‚ â€¢ 403 if forbidden                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Models Relationship

```
User (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (Many) Job
  â”‚                           â”‚
  â”‚ creates                    â”‚ has
  â”‚                            â”‚
  â”‚                         Applicant (Junction)
  â”‚                         â”œâ”€ user_id (ref)
  â”‚                         â”œâ”€ job_id (ref)
  â”‚                         â””â”€ appliedAt
  â”‚
  â”œâ”€ Phone (unique)
  â”œâ”€ Email
  â”œâ”€ Role
  â”œâ”€ Status
  â””â”€ Password (bcrypted)

Category (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (Many) Job
  â”‚                              â”‚
  â”‚ classifies                    â”‚
  â”‚                              â”‚
  â”œâ”€ Name
  â”œâ”€ Description
  â”‚
  â””â”€â”€â”€â”€ Job
        â”œâ”€ Title
        â”œâ”€ Description
        â”œâ”€ Price
        â”œâ”€ Status
        â”œâ”€ Image
        â”œâ”€ CreatedBy (User ref)
        â”œâ”€ Category (Category ref)
        â”œâ”€ Applicants (array)
        â””â”€ SelectedApplicant

User (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (1) UserProfile
  â”‚                                â”‚
  â”œâ”€ Profile Info                  â”œâ”€ Bio
  â”œâ”€ Rating                         â”œâ”€ Skills
  â”‚                                 â””â”€ Rating Score

User (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (Many) UserHistory
  â”‚                                â”‚
  â”œâ”€ History Tracking              â”œâ”€ Timestamp
  â”‚                                â”œâ”€ Action Type
  â”‚                                â””â”€ Details

Job (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (Many) Payment
  â”‚                              â”‚
  â”œâ”€ Payment Tracking            â”œâ”€ Amount
  â”‚                              â”œâ”€ Status
  â”‚                              â”œâ”€ Date
  â”‚                              â””â”€ Method
```

---

## Request/Response Types

### Successful Response (200/201)
```
Status: 200 OK
Body: {
  data: {...},
  message: "Success",
  timestamp: "2024-01-28T10:30:00Z"
}
```

### Error Response (4xx/5xx)
```
Status: 400/401/403/404/500
Body: {
  message: "Error description",
  code: "ERROR_CODE",
  timestamp: "2024-01-28T10:30:00Z"
}
```

### Auth Response
```
Status: 200 OK
Body: {
  token: "JWT_TOKEN_STRING",
  user: {
    id: "user_id",
    phoneNumber: "09123456789",
    email: "user@example.com",
    firstName: "John",
    lastName: "Doe",
    role: "user"
  },
  message: "Login successful"
}
```

---

## Environment Configuration

```
CLIENT (.env)
â”œâ”€ REACT_APP_API_BASE
â”‚  â””â”€ http://localhost:5000/api
â”‚
â””â”€ VITE Config
   â””â”€ Proxy /api â†’ http://localhost:5000

SERVER (.env)
â”œâ”€ PORT: 5000
â”œâ”€ MONGO_URI: mongodb://localhost:27017/MicroJob
â”œâ”€ JWT_SECRET: (random string - KEEP SECRET)
â”œâ”€ CLIENT_ORIGIN: http://localhost:5173
â””â”€ NODE_ENV: development
```

---

## Technology Stack

```
Frontend (Client)
â”œâ”€ React 19.2
â”œâ”€ TypeScript 4.9
â”œâ”€ Vite (Build tool)
â”œâ”€ React Router v7
â”œâ”€ Tailwind CSS
â””â”€ Fetch API

Backend (Server)
â”œâ”€ Node.js
â”œâ”€ Express.js 5.2
â”œâ”€ Mongoose (MongoDB ODM)
â”œâ”€ JWT (Authentication)
â”œâ”€ bcryptjs (Password hashing)
â”œâ”€ Morgan (Logging)
â”œâ”€ CORS
â””â”€ Cookie Parser

Database
â””â”€ MongoDB

Hosting (Ready for)
â”œâ”€ Frontend: Vercel, Netlify, GitHub Pages
â””â”€ Backend: Heroku, Railway, Render
```

This architecture provides a solid, scalable foundation for the MicroJobs platform! ğŸš€
